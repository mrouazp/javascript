function save(){edit===!1?addTodo(task.value):(editTodo(task.value,edit),edit=!1),show()}function addTodo(e){todos.push({done:!1,value:e})}function editTodo(e,t){todos[t].value=e}function completeTodo(e,t){todos[t].done=e}function getTodo(e){return todos[e].value}function deleteTodo(e){todos.splice(e,1)}function show(){display.innerHTML="",todos.forEach(showOne)}function showOne(e,t){var d=document.createElement("div");d.className="todo",d.innerHTML="<span>id = "+t+"</span><p data-id="+t+'><input type="checkbox"'+(e.done?" checked":"")+">"+e.value+'<span class="delete">X</span></p>',display.appendChild(d)}var display=document.getElementById("display"),task=document.getElementById("task"),submit=document.getElementById("submit"),removeCompleted=document.getElementById("removeCompleted"),todos=[],edit=!1;submit.addEventListener("click",save),document.addEventListener("keydown",function(e){13==e.keyCode&&save()}),display.addEventListener("click",function(e){if("delete"===e.target.className){var t=e.target.parentElement.dataset.id;deleteTodo(t),show()}}),display.addEventListener("click",function(e){if(e.target.matches(".todo p")){var t=e.target.dataset.id;task.value=getTodo(t),task.focus(),edit=t}}),display.addEventListener("change",function(e){if(e.target.matches(".todo input")){var t=e.target.parentElement.dataset.id;completeTodo(e.target.checked,t)}}),removeCompleted.addEventListener("click",function(){todos=todos.filter(function(e){return!e.done}),edit=!1,show()});